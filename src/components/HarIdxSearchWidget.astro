---
// HAR IDX Search Widget Component
export interface Props {
  lang: 'en' | 'es';
}

const { lang } = Astro.props;

const translations = {
  en: {
    placeholder: 'Enter location, ZIP code, or MLS number...',
    searchButton: 'Search Properties'
  },
  es: {
    placeholder: 'Ingrese ubicación, código postal o número MLS...',
    searchButton: 'Buscar Propiedades'
  }
};

const t = translations[lang];
---

<div class="har-idx-search-widget card card-padding">
  <!-- Search Form -->
  <form class="space-y-4 mb-6">
    <div class="flex flex-col md:flex-row gap-4">
      <div class="flex-1">
        <input
          type="text"
          name="search"
          placeholder={t.placeholder}
          class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-colors"
        />
      </div>
      <button type="submit" class="btn-primary whitespace-nowrap">
        {t.searchButton}
      </button>
    </div>
    
    <!-- Quick Filters -->
    <div class="flex flex-wrap gap-3 pt-2">
      <select class="px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-primary-500 focus:border-primary-500">
        <option>Property Type</option>
        <option>Single Family</option>
        <option>Condo</option>
        <option>Townhouse</option>
      </select>
      <select class="px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-primary-500 focus:border-primary-500">
        <option>Price Range</option>
        <option>Under $200K</option>
        <option>$200K - $400K</option>
        <option>$400K - $600K</option>
        <option>$600K+</option>
      </select>
      <select class="px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-primary-500 focus:border-primary-500">
        <option>Bedrooms</option>
        <option>1+</option>
        <option>2+</option>
        <option>3+</option>
        <option>4+</option>
      </select>
    </div>
  </form>

  <!-- HAR IDX Search Widget Integration -->
  <div class="card">
    <iframe 
      src={`https://www.har.com/widgets/search?account=DEMO&lang=${lang}&style=modern&demo=true`}
      width="100%"
      height="400"
      title={t.placeholder}
      class="rounded-xl border-0"
      style="min-height: 400px;">
    </iframe>
  </div>
</div>
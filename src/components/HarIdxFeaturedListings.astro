---
// HAR IDX Featured Listings Widget Component
export interface Props {
  lang: 'en' | 'es';
  count?: number;
}

const { lang, count = 6 } = Astro.props;

const translations = {
  en: {
    title: 'Featured Properties',
    viewDetails: 'View Details',
    contactAgent: 'Contact Agent',
    moreListings: 'View More Listings'
  },
  es: {
    title: 'Propiedades Destacadas',
    viewDetails: 'Ver Detalles',
    contactAgent: 'Contactar Agente',
    moreListings: 'Ver Más Listados'
  }
};

const t = translations[lang];
---

<div class="har-idx-featured-listings">
  <!-- Sample Property Cards (to be replaced with HAR IDX) -->
  <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8">
    {Array.from({ length: count }, (_, i) => (
      <div class="bg-white rounded-lg shadow-lg overflow-hidden hover:shadow-xl transition-shadow">
        <div class="aspect-video bg-gray-200 flex items-center justify-center">
          <span class="text-gray-500">Property Image {i + 1}</span>
        </div>
        <div class="p-4">
          <div class="text-xl font-bold text-primary-600 mb-2">$XXX,XXX</div>
          <div class="text-sm text-secondary-600 mb-2">X bed • X bath • X sqft</div>
          <div class="text-sm text-secondary-500 mb-4">Property Address</div>
          <div class="flex space-x-2">
            <button class="btn-primary text-sm py-2 px-3 flex-1">
              {t.viewDetails}
            </button>
            <button class="btn-secondary text-sm py-2 px-3">
              {t.contactAgent}
            </button>
          </div>
        </div>
      </div>
    ))}
  </div>

  <!-- HAR IDX Featured Listings Integration -->
  <div class="mb-8">
    <!-- Demo HAR IDX Featured Listings Widget -->
    <iframe 
      src={`https://www.har.com/widgets/featured?account=DEMO&count=${count}&lang=${lang}&style=grid&demo=true`}
      width="100%"
      height="600"
      frameborder="0"
      title={t.title}
      class="rounded-lg shadow-sm">
    </iframe>
    
    <!-- Alternative: Script-based integration -->
    <!-- 
    <div id="har-idx-featured-listings"></div>
    <script>
      window.HarIDX = window.HarIDX || {};
      HarIDX.renderFeatured({
        container: '#har-idx-featured-listings',
        account: 'YOURACCOUNT',
        count: {count},
        language: '{lang}',
        style: 'grid'
      });
    </script>
    <script src="https://www.har.com/widgets/har-idx.js" async></script>
    -->
  </div>
  
  <div class="p-4 bg-green-50 border border-green-200 rounded-lg text-sm">
    <p class="text-green-800 mb-2">
      <strong>Demo Mode:</strong> Using demo property data. 
      Replace "DEMO" with your HAR IDX account ID for live MLS listings.
    </p>
    <div class="text-xs text-green-600">
      Configuration: count={count}, language={lang}
    </div>
  </div>

  <!-- View More Button -->
  <div class="text-center mt-6">
    <a href={lang === 'en' ? '/en#search' : '/es#search'} class="btn-primary">
      {t.moreListings}
    </a>
  </div>
</div>